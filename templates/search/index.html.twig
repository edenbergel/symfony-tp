{% extends 'base.html.twig' %}

{% block title %}SearchController!{% endblock %}

{% block body %}
<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; display:block; }
</style>

<div class="example-wrapper">
    <form action="#" method="get">
        <div>
            <label for="city-search">Cherchez une ville :</label>
            <input type="search" id="search" name="ville"
                aria-label="Search informations about the city">
        </div>

        <div>
            <label for="code-postal">Code postal :</label>
            <input type="text" id="code_postal" name="codepostal">
        </div>
        <div>
            <label for="type">Séléctionnez un type d'etablissement: </label>
            <select name="type">
                <option value="accompagnement_personnes_agees">accompagnement personnes agees</option>
                <option value="adil">adil</option>
                <option value="afpa">afpa</option>
                <option value="anah">anah</option>
                <option value="apec">apec</option>
                <option value="apecita">apecita</option>
                <option value="ars">ars</option>
                <option value="ars_antenne">ars_antenne</option>
                <option value="banque_de_france">banque de france</option>
                <option value="bav">bav</option>
                <option value="bsn">bsn</option>
                <option value="caa">caa</option>
                <option value="caf">caf</option>
                <option value="carsat">carsat</option>
                <option value="ccas">ccas</option>
                <option value="cci">cci</option>
                <option value="cdas">cdas</option>
                <option value="cddp">cddp</option>
                <option value="cdg">cdg</option>
                <option value="centre_detention">centre detention</option>
                <option value="centre_impots_fonciers">centre impots fonciers</option>
                <option value="centre_penitentiaire">centre penitentiaire</option>
                <option value="centre_social">centre social</option>
                <option value="cesr">cesr</option>
                <option value="cg">cg</option>
                <option value="chambre_agriculture">chambre agriculture</option>
                <option value="chambre_metier">chambre metier</option>
                <option value="cicas">cicas</option>
                <option value="cidf">cidf</option>
                <option value="cij">cij</option>
                <option value="cio">cio</option>
                <option value="civi">civi</option>
                <option value="clic">clic</option>
                <option value="cnfpt">cnfpt</option>
                <option value="cnra">cnra</option>
                <option value="commissariat_police">commissariat police</option>
                <option value="commission_conciliation">commission conciliation</option>
                <option value="conciliateur_fiscal">conciliateur fiscal</option>
                <option value="conseil_culture">conseil culture</option>
                <option value="cour_appel">cour appel</option>
                <option value="cpam">cpam</option>
                <option value="cr">cr</option>
                <option value="crc">crc</option>
                <option value="crdp">crdp</option>
                <option value="creps">creps</option>
                <option value="crfpn">crfpn</option>
                <option value="crib">crib</option>
                <option value="crous">crous</option>
                <option value="csl">csl</option>
                <option value="dac">dac</option>
                <option value="dd_femmes">dd femmes</option>
                <option value="dd_fip">dd fip</option>
                <option value="ddcs">ddcs</option>
                <option value="ddcspp">ddcspp</option>
                <option value="ddpjj">ddpjj</option>
                <option value="ddpp">ddpp</option>
                <option value="ddsp">ddsp</option>
                <option value="ddt">ddt</option>
                <option value="defenseur_droits">defenseur droits</option>
                <option value="did_routes">did routes</option>
                <option value="dir_mer">dir mer</option>
                <option value="dir_meteo">dir meteo</option>
                <option value="dir_pj">dir pj</option>
                <option value="direccte">direccte</option>
                <option value="direccte_ut">direccte_ut</option>
                <option value="dml">dml</option>
                <option value="dr_femmes">dr femmes</option>
                <option value="dr_fip">dr fip</option>
                <option value="dr_insee">dr_insee</option>
                <option value="drac">drac</option>
                <option value="draf">draf</option>
                <option value="drddi">drddi</option>
                <option value="dreal">dreal</option>
                <option value="dreal_ut">dreal_ut</option>
                <option value="driea">driea</option>
                <option value="driea_ut">driea ut</option>
                <option value="driee">driee</option>
                <option value="driee_ut">driee_ut</option>
                <option value="drihl">drihl</option>
                <option value="drihl_ut">drihl ut</option>
                <option value="drjscs">drjscs</option>
                <option value="dronisep">dronisep</option>
                <option value="drpjj">drpjj</option>
                <option value="drrt">drrt</option>
                <option value="drsp">drsp</option>
                <option value="dz_paf">dz_paf</option>
                <option value="edas">edas</option>
                <option value="epci">epci</option>
                <option value="esm">esm</option>
                <option value="fdapp">fdapp</option>
                <option value="fdc">fdc</option>
                <option value="fongecif">fongecif</option>
                <option value="gendarmerie">gendarmerie</option>
                <option value="greta">greta</option>
                <option value="hypotheque">hypotheque</option>
                <option value="inspection_academique">inspection academique</option>
                <option value="maia">maia</option>
                <option value="mairie">mairie</option>
                <option value="mairie_com">mairie com</option>
                <option value="mairie_mobile">mairie mobile</option>
                <option value="maison_arret">maison arret</option>
                <option value="maison_centrale">maison centrale</option>
                <option value="maison_handicapees">maison handicapees</option>
                <option value="mds">mds</option>
                <option value="mission_locale">mission locale</option>
                <option value="mjd">mjd</option>
                <option value="msa">msa</option>
                <option value="ofii">ofii</option>
                <option value="onac">onac</option>
                <option value="onf">onf</option>
                <option value="paris_mairie">paris mairie</option>
                <option value="paris_mairie_arrondissement">paris mairie arrondissement</option>
                <option value="paris_ppp">paris ppp</option>
                <option value="paris_ppp_antenne">paris ppp antenne</option>
                <option value="paris_ppp_certificat_immatriculation">paris ppp certificat immatriculation</option>
                <option value="paris_ppp_gesvres">paris ppp gesvres</option>
                <option value="paris_ppp_permis_conduire">paris ppp permis conduire</option>
                <option value="permanence_juridique">permanence juridique</option>
                <option value="pif">pif</option>
                <option value="pmi">pmi</option>
                <option value="pole_emploi">pole emploi</option>
                <option value="pp_marseille">pp marseille</option>
                <option value="prefecture">prefecture</option>
                <option value="prefecture_greffe_associations">prefecture greffe associations</option>
                <option value="prefecture_region">prefecture region</option>
                <option value="prudhommes">prudhommes</option>
                <option value="rectorat">rectorat</option>
                <option value="sdac">sdac</option>
                <option value="sdsei">sdsei</option>
                <option value="service_navigation">service navigation</option>
                <option value="sgami">sgami</option>
                <option value="sie">sie</option>
                <option value="sip">sip</option>
                <option value="sous_pref">sous pref</option>
                <option value="spip">spip</option>
                <option value="suio">suio</option>
                <option value="ta">ta</option>
                <option value="te">te</option>
                <option value="tgi">tgi</option>
                <option value="ti">ti</option>
                <option value="tresorerie">tresorerie</option>
                <option value="tribunal_commerce">tribunal commerce</option>
                <option value="urssaf">urssaf</option>
            </select>
        </div>
        <input type="submit" name="send" value="Chercher la ville">
    </form>

    {% if citys is defined %}
    <h3>Informations sur la ville</h3>
    <ul>
        <li>
            Nom de la ville : {{citys['nom']}}
        </li>
        <li>
            Code de la ville : {{citys['code']}}
        </li>
        <li>
            Code postal de la ville : {{citys['codesPostaux'][0]}}
        </li>
        <li>
            Code département : {{citys['codeDepartement']}}
        </li>
        <li>
            Code région : {{citys['codeRegion']}}
        </li>
        <li>
            Population : {{citys['population']}}
        </li>
    </ul>

    {% if etablissements is defined %}
    {% for etablissement in etablissements %}
    <h3>Informations sur l'établissement</h3>
    <ul>
        <li>Nom : {{etablissement['features'][0]['properties']['nom']}}</li>
        <li>Adresse : {{etablissement['features'][0]['properties']['adresses'][0]['lignes'][0]}}</li>
        <li>Code Postal : {{etablissement['features'][0]['properties']['adresses'][0]['codePostal']}}</li>
        <li>Commune : {{etablissement['features'][0]['properties']['adresses'][0]['commune']}}</li>
        <li>Email : {{etablissement['features'][0]['properties']['email']}}</li>
        <li>Téléphone : {{etablissement['features'][0]['properties']['telephone']}}</li>
        <li>Site : <a href="{{etablissement['features'][0]['properties']['url']}}" target="_blank">Accéder au site</a></li>
    </ul>
    {% endfor %}
    {% endif %}
    {% endif %}

</div>
{% endblock %}
